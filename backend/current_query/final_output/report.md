## Problem Statement

> Changjiang Comprehensive Shopping Mall has 5000 m² of space for lease and plans to attract the following 5 types of stores as tenants. The table below shows the area occupied by each type of store for one shop, the minimum and maximum number of shops for each type within the mall, and the expected annual profit (in ten thousand yuan) per store for different numbers of stores. Each store pays 20% of its annual profit as rent to the mall. Question: How many of each type of store should the mall lease to maximize total rental income?

The core optimization question is to determine the optimal mix of store types and quantities that maximizes the mall's rental income while respecting space constraints and store count limits.

## Executive Summary

Changjiang Comprehensive Shopping Mall faces a critical space allocation decision that will determine its annual rental income. With 5000 m² available for lease across five store categories, the challenge is to find the optimal tenant mix that maximizes revenue while meeting operational requirements.

Our optimization analysis has identified the **optimal solution** that will generate **280,000 yuan in annual rental income**. The recommended tenant configuration is:
- **2 Jewelry stores** (500 m²)
- **2 Shoes & Hats stores** (700 m²)
- **3 General Merchandise stores** (2400 m²)
- **2 Catering stores** (1000 m²)
- **1 Bookstore** (400 m²)

This allocation utilizes exactly **5000 m²** of the available space—every square meter is productively employed. The total annual profit generated by these stores is 1.4 million yuan, of which the mall captures 20% as rent.

**This solution is proven optimal**—there is no other configuration of stores that can generate higher rental income given the constraints. The solver confirmed this with a 0% optimality gap, meaning we have found the absolute best possible solution.

The key insight driving this solution is the strategic selection of store quantities that balance profit per store against diminishing returns from competition. For instance, while a single General Merchandise store generates the highest profit per unit (270,000 yuan), having three stores still provides strong total returns (600,000 yuan combined) despite some cannibalization.

## Baseline Comparison

*Note: No baseline strategy was provided. Skip this section and note that a baseline comparison was not possible.*

## Key Recommendations

1. **Lease exactly 2 Jewelry stores** to capture 160,000 yuan in annual profit (32,000 yuan rent) while avoiding excessive competition that would reduce per-store profitability from 90,000 to 70,000 yuan.

2. **Establish 3 General Merchandise stores** as the anchor tenants, dedicating 2400 m² (48% of total space) to this highest-revenue category that will generate 120,000 yuan in annual rent.

3. **Limit Bookstores to 1 location** despite having capacity for 2—the severe profit decline for multiple bookstores (from 160,000 to 100,000 yuan) makes a second location economically unattractive.

4. **Maximize Shoes & Hats presence with 2 stores** to fully utilize the allowed quota for this profitable category, securing 36,000 yuan in annual rent.

5. **Position 2 Catering establishments** strategically to balance food service availability with profitability, avoiding the sharp decline that occurs with 3 locations.

---

## Technical Appendix

### Problem Formulation

The mall space allocation problem is formulated as a mixed-integer linear program with a piecewise linear objective function that captures economies and diseconomies of scale.

**Sets and indices:**
- Store types: $t \in \mathcal{T} = \{\text{J, S, G, C, B}\}$ representing Jewelry, Shoes & Hats, General Merchandise, Catering, and Bookstore respectively
- Allowed quantities: $k \in K_t$ where $K_t$ represents the feasible number of stores for type $t$

**Parameters:**

| Symbol | Definition | Value |
|--------|------------|-------|
| $A$ | Total available space | 5000 m² |
| $\rho$ | Rent percentage of profit | 0.2 |
| $a_\text{J}$ | Area per Jewelry store | 250 m² |
| $a_\text{S}$ | Area per Shoes & Hats store | 350 m² |
| $a_\text{G}$ | Area per General Merchandise store | 800 m² |
| $a_\text{C}$ | Area per Catering store | 500 m² |
| $a_\text{B}$ | Area per Bookstore | 400 m² |
| $\pi_{t,k}$ | Total profit for $k$ stores of type $t$ | See profit matrix below |

The profit matrix $\pi_{t,k}$ (in 10,000 yuan):

| Store Type | $k=0$ | $k=1$ | $k=2$ | $k=3$ |
|------------|-------|-------|-------|-------|
| Jewelry (J) | - | 9 | 16 | 21 |
| Shoes & Hats (S) | - | 10 | 18 | - |
| General Merchandise (G) | - | 27 | 42 | 60 |
| Catering (C) | - | 17 | 30 | 36 |
| Bookstore (B) | 0 | 16 | 20 | - |

**Decision variables:**
- $y_{t,k} \in \{0,1\}$: Binary variable equal to 1 if exactly $k$ stores of type $t$ are selected

**Objective function:**
Maximize total rental income:
$$\max z = \rho \sum_{t \in \mathcal{T}} \sum_{k \in K_t} \pi_{t,k} y_{t,k}$$

**Constraints:**

1. **Exclusivity constraint** - exactly one configuration per store type:
   $$\sum_{k \in K_t} y_{t,k} = 1 \quad \forall t \in \mathcal{T}$$

2. **Space constraint** - total area cannot exceed available space:
   $$\sum_{t \in \mathcal{T}} a_t \left(\sum_{k \in K_t} k \cdot y_{t,k}\right) \leq A$$

3. **Binary constraints**:
   $$y_{t,k} \in \{0,1\} \quad \forall t \in \mathcal{T}, k \in K_t$$

### Optimal Solution

The optimal solution selects the following store configurations:

| Variable | Value | Description |
|----------|-------|-------------|
| $y_{\text{J},2}$ | 1 | Select 2 Jewelry stores |
| $y_{\text{S},2}$ | 1 | Select 2 Shoes & Hats stores |
| $y_{\text{G},3}$ | 1 | Select 3 General Merchandise stores |
| $y_{\text{C},2}$ | 1 | Select 2 Catering stores |
| $y_{\text{B},1}$ | 1 | Select 1 Bookstore |
| All other $y_{t,k}$ | 0 | Not selected |

**Active constraints:**
- The space constraint is **exactly binding** at the optimum: total area used = $2(250) + 2(350) + 3(800) + 2(500) + 1(400) = 5000$ m²
- All exclusivity constraints are binding by construction (each equals 1)

**Slack analysis:**
The space constraint has zero slack, indicating that the optimal solution fully utilizes all available mall space. This is a critical insight—any reduction in available space would directly impact rental income, while any increase could potentially be leveraged for additional revenue.

**Economic interpretation:**
The solution reveals interesting patterns in the profit structure. Store types with steeper profit declines (like Bookstores, dropping from 16 to 10 per store) are limited to smaller quantities, while those with more gradual declines or economies of scale are maximized within their bounds.

### Solver Statistics

| Metric | Value |
|--------|-------|
| Solver Status | Optimal |
| Objective Value | 28.0 (280,000 yuan) |
| MIP Gap | 0.0% |
| Best Bound | 28.0 |
| Nodes Explored | 1 |
| Solution Time | 0.00 seconds |
| Simplex Iterations | 6 |

The 0% MIP gap confirms that the solution is globally optimal—there exists no better integer solution. The solver required minimal computational effort, exploring only the root node to prove optimality.

### Generated Code

```python
import gurobipy as gp
from gurobipy import GRB

# Data
area = {
    'J': 250,
    'S': 350,
    'G': 800,
    'C': 500,
    'B': 400
}
profit = {
    'J': {1: 9, 2: 16, 3: 21},
    'S': {1: 10, 2: 18},
    'G': {1: 27, 2: 42, 3: 60},
    'C': {1: 17, 2: 30, 3: 36},
    'B': {0: 0, 1: 16, 2: 20}
}
# Allowed numbers of stores for each type
allowed = {
    'J': [1, 2, 3],
    'S': [1, 2],
    'G': [1, 2, 3],
    'C': [1, 2, 3],
    'B': [0, 1, 2]
}
rent_perc = 0.2
total_area = 5000

# Create model
m = gp.Model('MallLease')

# Decision variables: y[t,k] binary
y = {}
for t in allowed:
    for k in allowed[t]:
        y[t, k] = m.addVar(vtype=GRB.BINARY, name=f'y_{t}_{k}')

# Exactly one bundle per type
for t in allowed:
    m.addConstr(gp.quicksum(y[t, k] for k in allowed[t]) == 1,
                name=f'one_bundle_{t}')

# Area constraint
area_expr = gp.quicksum(area[t] * gp.quicksum(k * y[t, k] for k in allowed[t])
                      for t in allowed)
m.addConstr(area_expr <= total_area, name='area_limit')

# Objective: maximize rental income
obj = gp.quicksum(profit[t][k] * y[t, k]
                   for t in allowed for k in allowed[t])
m.setObjective(rent_perc * obj, GRB.MAXIMIZE)

# Optimize
m.optimize()

# Print results
if m.status == GRB.OPTIMAL:
    print("\nOptimal solution:")
    for t in allowed:
        for k in allowed[t]:
            if y[t, k].X > 0.5:
                print(f"{t}: {k} stores")
    total_profit = sum(profit[t][k] * y[t, k].X
                       for t in allowed for k in allowed[t])
    total_rent = rent_perc * total_profit
    print(f"\nTotal profit (before rent): {total_profit}")
    print(f"Total rental income: {total_rent:.2f}")
else:
    print("No optimal solution found.")

# --- Optima: save objective value ---
if m.status == GRB.OPTIMAL:
    with open("output_solution.txt", "w") as _f:
        _f.write(str(m.objVal))
    print("Optimal Objective Value:", m.objVal)
else:
    with open("output_solution.txt", "w") as _f:
        _f.write(str(m.status))
    print("Model status:", m.status)
```