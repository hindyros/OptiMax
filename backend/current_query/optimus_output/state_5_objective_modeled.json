{
    "description": "We often keep patients in the ICU longer than necessary because transfers to step-down or wards happen late in the day. That blocks beds for new admissions. I want to shift transfers earlier (when possible) so ICU beds free up sooner.",
    "parameters": {
        "NumberOfPatients": {
            "shape": [],
            "definition": "Total number of rows in admissions dataset",
            "type": "integer"
        },
        "NumberOfICUStays": {
            "shape": [],
            "definition": "Total number of rows in icustays dataset",
            "type": "integer"
        },
        "NumberOfTransfers": {
            "shape": [],
            "definition": "Total number of rows in transfers dataset",
            "type": "integer"
        },
        "ICULengthOfStay": {
            "shape": [
                140
            ],
            "definition": "Length of stay in ICU for each admission",
            "type": "float"
        },
        "ICUInTimes": {
            "shape": [
                140
            ],
            "definition": "In-time for each ICU stay",
            "type": "integer"
        },
        "ICUOutTimes": {
            "shape": [
                140
            ],
            "definition": "Out-time for each ICU stay",
            "type": "integer"
        },
        "TransferInTimes": {
            "shape": [
                1190
            ],
            "definition": "In-time for each transfer event",
            "type": "integer"
        },
        "TransferOutTimes": {
            "shape": [
                1190
            ],
            "definition": "Out-time for each transfer event",
            "type": "integer"
        }
    },
    "objective": {
        "description": "Minimize the total ICU bed occupancy time by shifting patient transfers to earlier times when medically feasible",
        "formulation": "$\\min \\sum_{i=1}^{140} HasTransfer_i \\cdot (TransferTimes_i - ICUInTimes_i)$"
    },
    "constraints": [
        {
            "description": "Transfer time cannot be earlier than the minimum required ICU stay duration for each patient",
            "formulation": "$\\\\forall i \\\\in \\\\{1, ..., 140\\\\}, TransferTimes[i] \\\\geq ICUInTimes[i] + MinRequiredStay[i]$",
            "code": null
        },
        {
            "description": "Transfers cannot be scheduled outside of operational hours when staff is available",
            "formulation": "$\\\\forall i \\\\in \\\\{1, ..., 140\\\\}, \\\\sum_{t} OperationalHours[t] \\\\cdot TimeSlotSelected[i,t] = 1 \\\\text{ and } TransferTimes[i] = \\\\sum_{t} t \\\\cdot TimeSlotSelected[i,t]$",
            "code": null
        },
        {
            "description": "auxiliary constraint",
            "formulation": "$\\\\forall i \\\\in \\\\{1, ..., 140\\\\}, \\\\sum_{t=1}^{24} TimeSlotSelected[i,t] = 1$"
        },
        {
            "description": "auxiliary constraint",
            "formulation": "$\\\\forall i \\\\in \\\\{1, ..., 140\\\\}, \\\\forall t \\\\in \\\\{1, ..., 24\\\\}, TimeSlotSelected[i,t] \\\\leq OperationalHours[t]$"
        },
        {
            "description": "Each ICU patient can have at most one transfer out of the ICU",
            "formulation": "$\\\\forall i \\\\in \\\\{1, 2, \\\\ldots, 140\\\\}, HasTransfer[i] \\\\leq 1$",
            "code": null
        },
        {
            "description": "The total number of simultaneous transfers cannot exceed available transfer resources",
            "formulation": "$\\\\forall t, \\\\sum_{i=1}^{140} TransferActive[i,t] \\\\leq MaxSimultaneousTransfers$",
            "code": null
        },
        {
            "description": "auxiliary constraint",
            "formulation": "$\\\\forall i, t, TransferActive[i,t] \\\\geq HasTransfer[i] \\\\cdot (1 - (TransferTimes[i] - t + TransferDuration[i])/M) - (1 - HasTransfer[i])$"
        },
        {
            "description": "auxiliary constraint",
            "formulation": "$\\\\forall i, t, TransferActive[i,t] \\\\geq HasTransfer[i] \\\\cdot (1 - (t - TransferTimes[i] + 1)/M) - (1 - HasTransfer[i])$"
        },
        {
            "description": "Transfer out time must be after or equal to the ICU admission time for each patient",
            "formulation": "$\\\\forall i, \\\\text{HasTransfer}[i] = 1 \\\\Rightarrow \\\\text{TransferTimes}[i] \\\\geq \\\\text{ICUInTimes}[i]$",
            "code": null
        },
        {
            "description": "The shifted transfer time must be non-negative and within the planning horizon",
            "formulation": "$\\\\forall i \\\\in \\\\{1, ..., 140\\\\}, 0 \\\\leq TransferTimes[i] \\\\leq PlanningHorizon$",
            "code": null
        }
    ],
    "variables": {
        "TransferTimes": {
            "shape": [
                140
            ],
            "type": "continuous",
            "definition": "The optimized transfer time for each ICU stay"
        },
        "MinRequiredStay": {
            "shape": [
                140
            ],
            "type": "continuous",
            "definition": "The minimum required ICU stay duration for each patient"
        },
        "HasTransfer": {
            "shape": [
                140
            ],
            "type": "binary",
            "definition": "Binary indicator whether each ICU stay results in a transfer out of the ICU"
        },
        "PlanningHorizon": {
            "shape": [],
            "type": "continuous",
            "definition": "The time horizon within which all transfer decisions must be made"
        }
    }
}